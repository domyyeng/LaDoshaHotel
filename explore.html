<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Explore â€” La Dosha Hotel</title>
  <link rel="stylesheet" href="css/style.css" />

  <!-- Favicon -->
<link rel="icon" type="image/png" href="assets/images/ladoshalogo.png" />
<link rel="shortcut icon" href="assets/images/ladoshalogo.png" type="image/png" />

  <style>
    body { font-family: sans-serif; background: #f9f9f9; margin:0; }
    .menu-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 20px; margin: 20px 0; }
    .menu-item.card {
      border: 1px solid #ddd; border-radius: 10px; padding: 15px; text-align: center;
      background: #fff; transition: transform 0.2s ease, box-shadow 0.2s ease; position: relative; overflow: hidden;
    }
    .menu-item.card:hover { transform: translateY(-5px) scale(1.02); box-shadow: 0 6px 15px rgba(0,0,0,0.15); }
    .menu-item img { width: 100%; height: 160px; object-fit: cover; border-radius: 8px; }
    .menu-item h4 { margin: 10px 0 6px; font-size: 18px; }
    .menu-item .price { font-weight: bold; color: #ff8800; margin-bottom: 8px; }
    .btn { padding: 8px 14px; border: none; border-radius: 6px; cursor: pointer; text-decoration: none; text-align: center; margin: 3px 0; font-size: 14px; }
    .btn.primary { background: #ff8800; color: #fff; font-weight: 600; }
    .btn.primary:hover { background: #e67600; }
    .btn.secondary { background: #f0f0f0; color: #333; }
    .btn.secondary:hover { background: #ddd; }

    .details-dropdown {
      max-height: 0; overflow: hidden; transition: max-height 0.3s ease, padding 0.3s ease; text-align: left;
      margin-top: 0; padding: 0 0; border-top: 1px solid #eee; background: #fafafa; border-radius: 6px; font-size: 14px;
    }
    .details-dropdown.open { max-height: 350px; padding: 8px; margin-top: 8px; }
    .details-dropdown label { display: block; margin-top: 6px; font-weight: 500; }
    .details-dropdown input, .details-dropdown textarea, .details-dropdown select { width: 100%; margin-top: 3px; padding: 6px; border-radius: 6px; border: 1px solid #ccc; font-size: 14px; }
    .details-dropdown .quantity-box { display: flex; gap: 6px; align-items: center; margin-top: 6px; }

    .category-bar { display:flex; gap:8px; margin:20px 0; flex-wrap:wrap; }
    .category-bar button { padding:6px 12px; border-radius:6px; border:none; cursor:pointer; background:#eee; font-weight:500; }
    .category-bar button.active { background:#ff8800; color:#fff; }

    #menu-search { width:100%; padding:10px; border-radius:6px; border:1px solid #ccc; margin-bottom:15px; }

    .toast { position: fixed; bottom: 30px; right: 20px; background: #222; color: #fff; padding: 12px 18px; border-radius: 8px; font-size: 15px; font-weight: 600; opacity: 0; transform: translateY(20px); pointer-events: none; transition: opacity 0.4s ease, transform 0.4s ease; z-index: 3000; }
    .toast.show { opacity: 1; transform: translateY(0); }
  </style>
    
</head>
<body>
  <script>
  // Load preloader.html into the page
  fetch("preloader.html")
    .then(response => response.text())
    .then(data => {
      document.body.insertAdjacentHTML("afterbegin", data);
      document.body.style.overflow = "hidden"; // prevent scroll while loading

      // âœ… Ensure preloader disappears when everything is ready
      window.addEventListener("load", () => {
        const preloader = document.getElementById("preloader");
        if (preloader) {
          preloader.classList.add("fade-out");
          setTimeout(() => preloader.remove(), 600); // remove after fade
        }
        document.body.style.overflow = "auto"; // restore scroll
      });

      // âœ… Safety timeout (in case load never fires, e.g., with cached assets)
      setTimeout(() => {
        const preloader = document.getElementById("preloader");
        if (preloader) {
          preloader.classList.add("fade-out");
          setTimeout(() => preloader.remove(), 600);
          document.body.style.overflow = "auto";
        }
      }, 5000); // force remove after 5 seconds
    });
</script>

<header class="site-header">
  <div class="container header-inner">
    <div class="logo"><a href="index.html"><img src="assets/images/ladoshalogo.png" alt="La Dosha Hotel Logo" style="height:50px; width:auto;" /></a></div>
    <button class="menu-toggle" aria-label="Toggle menu"><span></span><span></span><span></span></button>
    <nav class="main-nav" id="navMenu">
      <a href="index.html">Home</a>
      <a href="menu.html">Menu</a>
      <a href="explore.html">Explore</a>
      <a href="about.html">About</a>
      <a href="destinations.html">Destination</a>
    </nav>
  </div>
</header>

<a href="cart.html" class="cart-float">ðŸ›’ <span id="cart-count" class="cart-count">0</span></a>
<div id="toast" class="toast"></div>

<!-- ================= MAIN CONTENT ================= -->
  <main class="container" role="main">
    <h1>Best Designed Meals</h1>
    <div class="grid cols-3" id="explore-grid"></div>
  </main>

  <!-- ================= FOOTER ================= -->
<footer class="footer">
  <div class="footer-top">
    <div class="container footer-grid">
      
      <!-- About -->
      <div class="footer-col">
        <h4>La Dosha Hotel</h4>
        <p>La Dosha Hotel brings you a fine dining experience with online ordering, 
          fast delivery, and luxury hospitality. Our goal is to make every meal memorable.</p>
      </div>

      <!-- Quick Links -->
      <div class="footer-col">
        <h4>Quick Links</h4>
        <ul>
          <li><a href="menu.html">Menu</a></li>
          <li><a href="explore.html">Explore</a></li>
          <li><a href="about.html">About Us</a></li>
          <li><a href="destinations.html">Destinations</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </div>

      <!-- Customer Service -->
      <div class="footer-col">
        <h4>Customer Service</h4>
        <ul>
          <li><a href="destinations.html">Destination</a></li>
          <li><a href="cart.html">How to Order</a></li>
          <li><a href="checkout.html">Payment Options</a></li>
          <li><a href="index.html">Terms & Conditions</a></li>
          <li><a href="index.html">Privacy Policy</a></li>
        </ul>
      </div>

      <!-- Contact -->
      <div class="footer-col">
        <h4>Get in Touch</h4>
        <p><strong>Phone:</strong> +254 715 665 770</p>
        <p><strong>Email:</strong> ladoshahotel@gmail.com</p>
        <div class="social-links">
          <a href="https://www.facebook.com/ladoshahotel/"><img src="assets/icons/facebook.png" alt="Facebook"></a>
          <a href="#"><img src="assets/icons/instagram.png" alt="Instagram"></a>
          <a href="#"><img src="assets/icons/x.png" alt="X"></a>
          <a href="#"><img src="assets/icons/youtube.png" alt="YouTube"></a>
        </div>
      </div>

    </div>
  </div>
  
  <div class="footer-bottom">
    <div class="container">
      <p>&copy; 2025 La Dosha Hotel. All Rights Reserved.</p>
    </div>
  </div>
</footer>

  <!-- Scripts -->
  <script src="js/cart.js"></script>
  <script>
    const fancyMeals = [
      { id: 101, name: "mukimo", price: 100, img: "assets/images/mukimo.jpg", desc: "A visual feast with multiple sides" },
      { id: 102, name: "Sunset Chips Masala", price: 130, img: "assets/images/meal_chips_masala.jpg", desc: "Spiced just right" },
      { id: 103, name: "Signature Chips Plate", price: 100, img: "assets/images/chips.jpg", desc: "Classic comfort" },
    ];

    const grid = document.getElementById("explore-grid");

    fancyMeals.forEach(meal => {
      const card = document.createElement("div");
      card.className = "card menu-item";
      card.innerHTML = `
        <img src="${meal.img}" alt="${meal.name}" loading="lazy"/>
        <h4>${meal.name}</h4>
        <p>${meal.desc}</p>
        <div class="meta">
          <div class="price">KES ${meal.price}</div>
          <div><button class="btn primary">View</button></div>
        </div>`;
      grid.appendChild(card);

      card.querySelector("button").addEventListener("click", () => openMealDetail(meal.id));
    });

    function openMealDetail(id) {
      const meal = fancyMeals.find(x => x.id === id);
      if (!meal) return;
      document.body.style.overflow = "hidden";

      const modal = document.createElement("div");
      modal.className = "modal-bg";
      modal.setAttribute("role", "dialog");
      modal.setAttribute("aria-modal", "true");

      const box = document.createElement("div");
      box.className = "modal-box";

      box.innerHTML = `
        <img src="${meal.img}" alt="${meal.name}"/>
        <div class="modal-content">
          <h3>${meal.name}</h3>
          <p>${meal.desc}</p>
          <p class="price">KES ${meal.price}</p>

          <label for="people">How many?
            <input type="number" id="people" value="1" min="1"/>
          </label>

          <label for="loc">Location
            <input id="loc" value="Kinamba, Naivasha"/>
          </label>

          <label for="note">Special instructions
            <input id="note" placeholder="preferences"/>
          </label>

          <div>
            <button class="btn primary" id="addit">Add to cart</button>
            <button class="btn" id="close">Close</button>
          </div>
        </div>
      `;

      modal.appendChild(box);
      document.body.appendChild(modal);

      const closeModal = () => {
        modal.remove();
        document.body.style.overflow = "";
      };

      document.getElementById("close").addEventListener("click", closeModal);
      modal.addEventListener("click", e => { if (e.target === modal) closeModal(); });
      document.addEventListener("keydown", e => { if(e.key==="Escape") closeModal(); }, { once:true });

      document.getElementById("addit").addEventListener("click", () => {
        const people = Number(document.getElementById("people").value) || 1;
        const loc = document.getElementById("loc").value || "Kinamba, Naivasha";
        const note = document.getElementById("note").value || "";

        addToCart(meal.id, meal.name, meal.price, people, {
          signature: JSON.stringify({ people, loc }),
          note, people, location: loc
        });

        closeModal();
      });
    }

    const menuToggle = document.querySelector('.menu-toggle');
const navMenu = document.getElementById('navMenu');
menuToggle.addEventListener('click', () => navMenu.classList.toggle('active'));

const fullMenu = [
  {id:1,name:'Chips',price:100,img:'assets/images/chips.jpg',prep:'Fried golden chips',category:'snacks'},
  {id:2,name:'Chips Masala',price:130,img:'assets/images/chips_masala.jpg',prep:'Chips with spicy masala',category:'snacks'},
  {id:3,name:'Fried Eggs (pair)',price:60,img:'assets/images/fried_eggs.jpg',prep:'Two fried eggs',category:'breakfast'},
  {id:4,name:'Milk Tea',price:20,img:'assets/images/milk_tea.jpg',prep:'Hot milk tea',category:'drinks'},
  {id:5,name:'Chapati',price:30,img:'assets/images/chapati.jpg',prep:'Fresh chapati',category:'breakfast'},
  {id:6,name:'Mandazi',price:20,img:'assets/images/mandazi.jpg',prep:'Sweet mandazi',category:'snacks'},
  {id:7,name:'Githeri',price:50,img:'assets/images/githeri.jpg',prep:'Mixed maize and beans',category:'main'},
  {id:8,name:'Mukimo',price:100,img:'assets/images/mukimo.jpg',prep:'Traditional mashed veggies and maize',category:'main'}
];

const menuContainer = document.getElementById('menu-container');

function renderMenu(filter='all', search='') {
  menuContainer.innerHTML='';
  const filtered = fullMenu.filter(m=>{
    return (filter==='all'||m.category===filter) && m.name.toLowerCase().includes(search.toLowerCase());
  });
  filtered.forEach(m=>{
    const card = document.createElement('div');
    card.className='menu-item card';
    card.innerHTML=`
      <img src="${m.img}" alt="${m.name}" />
      <h4>${m.name}</h4>
      <div class="price">KES ${m.price}</div>
      <button class="btn primary" onclick="addToCart('meal-${m.id}','${m.name}',${m.price},1,{img:'${m.img}'})">Add to Cart</button>
      <button class="btn secondary" onclick="toggleDetails(this)">More Details</button>
      <div class="details-dropdown">
        <p><strong>Preparation:</strong> ${m.prep}</p>
        <p><strong>Category:</strong> ${m.category}</p>
        <div class="quantity-box">
          <label>Quantity:</label>
          <input type="number" value="1" min="1" />
        </div>
        <label>Customize your order:</label>
        <textarea placeholder="e.g. less spice, extra sauce"></textarea>
        <button class="btn primary" style="margin-top:6px;" onclick="addCustomToCart(${m.id}, this)">Add to Cart</button>
      </div>
    `;
    menuContainer.appendChild(card);
  });
}

function toggleDetails(btn){
  document.querySelectorAll('.details-dropdown.open').forEach(dd=>{
    if(dd!==btn.nextElementSibling) dd.classList.remove('open');
  });
  btn.nextElementSibling.classList.toggle('open');
}

function addCustomToCart(id, btn){
  const card = btn.closest('.menu-item.card');
  const meal = fullMenu.find(m=>m.id===id);
  const qty = Number(card.querySelector('.quantity-box input').value);
  addToCart('meal-'+id, meal.name, meal.price, qty, {img: meal.img});
  showToast(`${meal.name} x${qty} added to cart`);
}

function showToast(msg){
  const toast = document.getElementById('toast');
  toast.textContent = msg;
  toast.classList.add('show');
  setTimeout(()=>toast.classList.remove('show'),2500);
}

// Category filtering
document.querySelectorAll('.category-bar button').forEach(btn=>{
  btn.addEventListener('click',()=>{
    document.querySelectorAll('.category-bar button').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    renderMenu(btn.dataset.cat, document.getElementById('menu-search').value);
  });
});

// Search functionality
document.getElementById('menu-search').addEventListener('input', e=>{
  const activeCat = document.querySelector('.category-bar button.active').dataset.cat;
  renderMenu(activeCat, e.target.value);
});

// Initial render
renderMenu();
  </script>
</body>
</html>

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Menu — La Dosha Hotel</title>
  <link rel="stylesheet" href="css/style.css"/>
  <style>
    body { font-family: Arial, sans-serif; margin:0; background:#fafafa; }
    header { background:#111; color:#fff; padding:12px 20px; text-align:center; font-size:20px; }
    .filters { display:flex; gap:8px; justify-content:center; margin:12px; flex-wrap:wrap; }
    .filters button { padding:6px 14px; border:none; border-radius:6px; background:#eee; cursor:pointer; }
    .filters button.active { background:#111; color:#fff; }
    .search-box { text-align:center; margin:10px; }
    .search-box input { padding:8px; width:80%; max-width:320px; border-radius:6px; border:1px solid #ccc; }
    #menu-container { display:grid; grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); gap:14px; padding:14px; }
    .card { background:#fff; border-radius:10px; padding:12px; box-shadow:0 2px 6px rgba(0,0,0,0.08); text-align:center; }
    .card img { width:100%; height:140px; object-fit:cover; border-radius:8px; }
    .card h4 { margin:10px 0 4px; font-size:17px; }
    .price { color:#444; font-weight:bold; margin-bottom:6px; }
    .btn { padding:8px 14px; border:none; border-radius:8px; cursor:pointer; }
    .btn.primary { background:#111; color:#fff; }
    .btn[disabled] { background:#ccc; cursor:not-allowed; }
  </style>
</head>
<body>
  <header>La Dosha Menu</header>

  <!-- category filters -->
  <div class="filters">
    <button class="active" onclick="filterMenu('all', this)">All</button>
    <button onclick="filterMenu('snacks', this)">Snacks</button>
    <button onclick="filterMenu('breakfast', this)">Breakfast</button>
    <button onclick="filterMenu('drinks', this)">Drinks</button>
    <button onclick="filterMenu('main', this)">Main</button>
  </div>

  <!-- search -->
  <div class="search-box">
    <input type="text" id="searchInput" placeholder="Search meals..." onkeyup="renderMenu(currentFilter,this.value)">
  </div>

  <!-- menu grid -->
  <div id="menu-container"></div>

<script>
  // ------------------ MENU DATA ------------------
  const fullMenu = [
    {id:1, name:'Chips', price:100, img:'assets/images/chips.jpg', category:'snacks', inStock:true},
    {id:2, name:'Chips Masala', price:130, img:'assets/images/chips_masala.jpg', category:'snacks', inStock:true},
    {id:3, name:'Fried Eggs (pair)', price:60, img:'assets/images/fried_eggs.jpg', category:'breakfast', inStock:true},
    {id:4, name:'Milk Tea', price:20, img:'assets/images/milk_tea.jpg', category:'drinks', inStock:true}, 
    {id:5, name:'Chapati', price:30, img:'assets/images/chapati.jpg', category:'breakfast', inStock:true},
    {id:6, name:'Mandazi', price:20, img:'assets/images/mandazi.jpg', category:'snacks', inStock:false}, // OUT OF STOCK
    {id:7, name:'Githeri', price:50, img:'assets/images/githeri.jpg', category:'main', inStock:false}, // OUT OF STOCK
    {id:8, name:'Mukimo', price:100, img:'assets/images/mukimo.jpg', category:'main', inStock:false} // OUT OF STOCK
  ];

  let currentFilter = 'all';
  const menuContainer = document.getElementById('menu-container');

  // ------------------ RENDER MENU ------------------
  function renderMenu(filter='all', search=''){
    menuContainer.innerHTML = '';
    const filtered = fullMenu.filter(m =>
      (filter==='all'||m.category===filter) && m.name.toLowerCase().includes(search.toLowerCase())
    );

    filtered.forEach(m=>{
      const card=document.createElement('div');
      card.className='menu-item card';

      if(m.inStock){
        card.innerHTML=`
          <img src="${m.img}" alt="${m.name}"/>
          <h4>${m.name}</h4>
          <div class="price">KES ${m.price}</div>
          <div style="margin-top:6px">
            <input type="text" placeholder="Special instructions..." 
                   onchange="this.closest('.menu-item.card').dataset.note=this.value"
                   style="width:100%;padding:6px;border:1px solid #ccc;border-radius:6px;font-size:13px"/>
          </div>
          <button class="btn primary" onclick="
            addToCart(
              'meal-${m.id}',
              '${m.name}',
              ${m.price},
              1,
              { img:'${m.img}', note:this.closest('.menu-item.card').dataset.note || '' }
            )
          ">Add to Cart</button>
        `;
      } else {
        card.innerHTML=`
          <img src="${m.img}" alt="${m.name}" style="opacity:0.6"/>
          <h4>${m.name}</h4>
          <div class="price">KES ${m.price}</div>
          <div style="margin:8px 0; color:red; font-weight:bold;">Out of Stock</div>
          <button class="btn" disabled>Unavailable</button>
        `;
      }

      menuContainer.appendChild(card);
    });
  }

  // ------------------ CART ------------------
  function addToCart(id,name,price,qty,extra){
    alert(name + " added to cart ✅");
    // integrate with cart.js here
  }

  // ------------------ FILTER ------------------
  function filterMenu(cat,btn){
    currentFilter=cat;
    document.querySelectorAll('.filters button').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    renderMenu(cat, document.getElementById('searchInput').value);
  }

  // ------------------ INIT ------------------
  renderMenu();
</script>
</body>
</html>
